
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>醉過方知酒濃</title> 
	<meta name="author" content="Eli">
	
	<meta name="description" content="Google Map提供的API很强大，可以通过输入简单的地址，得到和该地址相关的详细信息。 通过地址去查经纬度信息 个人觉得很有用的信息，就是这个GEOCODINGAPI能够返回formatted_address和经纬度。 以下是相应的API，通过传递address参数（可以是简单的路名， &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<link href="/atom.xml" rel="alternate" title="醉過方知酒濃" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>-->
<!--google map-->
<!--<link href="/stylesheets/gmap.css" rel="stylesheet" type="text/css">-->
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<!--<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>-->
<!--<script src="/javascripts/gmap.js"></script>-->
<!-- Bootstrap -->
<link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap.min.css">
<link rel="stylesheet" href="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/css/bootstrap-theme.min.css">
<link href="/stylesheets/elistyle.css" media="screen, projection" rel="stylesheet" type="text/css">
<script src="http://cdn.bootcss.com/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/twitter-bootstrap/3.0.3/js/bootstrap.min.js"></script>
<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<header class="navbar eli-navbar navbar-fixed-top" role="navigation">
	<div class="container"><div class="navbar-header">
	<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
		<span class="icon-bar"></span>
	</button>
	<a class="navbar-brand">醉過方知酒濃</a>
</div>

<nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
	<ul class="nav navbar-nav"><li id="home"></span>
<a href="/">
	<span class="glyphicon glyphicon-home"> Home</span>
</a>
</li>
<li id="archives">
<a href="/blog/archives">
	<span class="glyphicon glyphicon-inbox"> Archives</span>
</a>
</li>
<li id="research">
<a href="/research"><span class="glyphicon glyphicon-book"> Research</span></a>
</li>
<li id="about">
<a href="/about"><span class="glyphicon glyphicon-user"> About</span></a>
</li>
<li id="links">
<a href="/links"><span class="glyphicon glyphicon-link"> Links</span></a>
</li></ul>
</nav>
</div>
</header>
<!--<div class="banner jumbotron">
	<h1>醉過方知酒濃</h1>
</div>-->
<div class="container eli-body">
<div class="row">
	<div class="col-md-1 left-page"></div>
	<div class="col-md-10 main-page">
	


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/05/01/googlemapapi-common/">
		
			Google Map API之获取地址和经纬度</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-05-01T00:48:00+08:00" pubdate data-updated="true">May 1<span>st</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/coding/'>coding</a>, <a class='category' href='/blog/categories/google-map/'>google map</a>, <a class='category' href='/blog/categories/tech/'>tech</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/05/01/googlemapapi-common/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p><code>Google Map</code>提供的API很强大，可以通过输入简单的地址，得到和该地址相关的详细信息。</p>

<ul>
  <li>通过地址去查经纬度信息</li>
</ul>

<p>个人觉得很有用的信息，就是这个<code>GEOCODING</code>API能够返回<code>formatted_address</code>和经纬度。</p>

<p>以下是相应的API，通过传递address参数（可以是简单的路名，甚至不用指定国家），就能获得相关地址的详细信息。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;sensor=true_or_false&amp;key=API_KEY</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><br /></p>

<ul>
  <li>通过经纬度去查地址信息</li>
</ul>

<p>这个<code>REVERSE GEOCODING</code>API可以通过传递特定的经纬度，获得该经纬度的详细地址信息。包括门牌号，路名，地区名，国家等非常详尽的信息。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">https://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&amp;sensor=true_or_false&amp;key=API_KEY</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><br /></p>

<p>另外，Google Map还提供<code>Direction API</code>, <code>Distance Matrix API</code>, <code>Elevation API</code>和<code>Time Zone API</code></p>

<p><a href="https://developers.google.com/maps/documentation/webservices/">https://developers.google.com/maps/documentation/webservices/</a></p>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/04/25/multi-octopress-deploy/">
		
			一台电脑中管理多个Octopress Blog</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-04-25T16:51:00+08:00" pubdate data-updated="true">Apr 25<span>th</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/blog/'>Blog</a>, <a class='category' href='/blog/categories/octopress/'>Octopress</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/04/25/multi-octopress-deploy/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>尝试着在一台mac上使用两个不同的Octopress博客，这两个博客目前放在github的两个用户下，所以每个用户的priviate key和pubilc key都是不一样的。</p>

<p>上网找了一些方法，主要都是通过配置<code>~/.ssh/config</code>来实现，不过我按照那些方法做，都没成功。貌似只能识别<code>~/.ssh/id_rsa</code>和<code>~/.ssh/id_rsa.pub</code>. 于是就索性写个脚本，自动进行不同用户的private key和public key的切换。</p>

<p>我将<code>id_rsa</code>和<code>id_rsa.pub</code>的命名规则改成<code>id_rsa_xxx</code>和<code>id_rsa_xxx.pub</code>, 这个脚本需要输入一个参数表示<code>xxx</code>，就能进行切换。</p>

<p>个人感觉这种方式用起来更加方便。以下是脚本的源代码。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>change-key.sh</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="k">if</span> <span class="o">[</span> ! <span class="nv">$1</span> <span class="o">]</span>;
</span><span class="line"><span class="k">then</span>
</span><span class="line"><span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;need role&quot;</span>
</span><span class="line">    <span class="nb">exit </span>0
</span><span class="line"><span class="k">fi</span>
</span><span class="line">
</span><span class="line"><span class="nv">private_key</span><span class="o">=</span><span class="s1">&#39;id_rsa_&#39;</span><span class="nv">$1</span>
</span><span class="line"><span class="nv">public_key</span><span class="o">=</span><span class="s1">&#39;id_rsa_&#39;</span><span class="nv">$1</span><span class="s1">&#39;.pub&#39;</span>
</span><span class="line">
</span><span class="line"><span class="nv">private_key_file</span><span class="o">=</span><span class="s1">&#39;/Users/jie/.ssh/&#39;</span><span class="nv">$private_key</span>
</span><span class="line"><span class="nv">public_key_file</span><span class="o">=</span><span class="s1">&#39;/Users/jie/.ssh/&#39;</span><span class="nv">$public_key</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="o">[</span> -e <span class="nv">$public_key_file</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> -e <span class="nv">$private_key_file</span> <span class="o">]</span>;
</span><span class="line"><span class="k">then</span>
</span><span class="line"><span class="k">    </span>cp <span class="nv">$public_key_file</span> ~/.ssh/id_rsa.pub
</span><span class="line">    cp <span class="nv">$private_key_file</span> ~/.ssh/id_rsa
</span><span class="line">    <span class="nb">echo</span> <span class="nv">$1</span><span class="s2">&quot; changed&quot;</span>
</span><span class="line"><span class="k">else</span>
</span><span class="line"><span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Can&#39;t find &quot;</span><span class="nv">$public_key_file</span><span class="s2">&quot; or &quot;</span><span class="nv">$private_key_file</span>
</span><span class="line"><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/04/22/meet-you-on-the-road/">
		
			在路上遇见</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-04-22T02:00:00+08:00" pubdate data-updated="true">Apr 22<span>nd</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/sui-xin-suo-xiang/'>隨心所想</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/04/22/meet-you-on-the-road/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>好久没写博客，因为有些事情，不论是巧合还是注定，终究是发生了，写博客的事情就被抛到脑后了。以至于博客原来的存放地方已经沦落成了“美团云”都不知道，现在又将其搬至别处才能继续浏览。</p>

<p>现在的社交圈里，<code>秘密</code>横行，大家都不在当面说真话，看似和谐的关系，背地里却是各种的黑暗。随着各种消息发布应用的泛滥，比如那个要发文字还必须长按拍照键的某圈，那个最长只有140的渣浪微博，那个各种藏头诗和无下限评论的某易，也许只有博客，这种最古老，最原始的发表自己观点的工具，才能真实的传递自己的想法。</p>

<p>刚刚装了“一个”，非常应景的，打开来看到的第一句话就是:</p>

<blockquote>
  <p>你来人间一趟，你要看看太阳，和你的心上人，一起走在街上。——海子 《夏天的太阳》</p>
</blockquote>

<p>在路上遇见了很多，曾经以为不会发生的事情，终究是发生了；曾经以为肯定发生的事情，也许就是不会发生。</p>

<p>感谢能在人生的路上遇见，也许我们之前曾无数次擦肩而过，这次终于是让我抓住了你。以后的路我们可以一起走下去，和你看河岸夕阳，流浪到天边。</p>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/02/01/begin-ios-develop/">
		
			简单的iOS互动</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-02-01T01:57:00+08:00" pubdate data-updated="true">Feb 1<span>st</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/objective-c/'>Objective-C</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>, <a class='category' href='/blog/categories/ios/'>iOS</a>, <a class='category' href='/blog/categories/xue-xi-kai-fa-yi-dong-app/'>学习开发移动APP</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/02/01/begin-ios-develop/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>最近想开发iOS上的app，却发现以前上课时学的iOS开发已经忘的差不多了，于是决定重拾objective-c，和iOS的开发。</p>

<p>我在看Beginning iOS 6 Development Exploring the iOS SDK 一书，这书有中文的翻译版，也翻译的不错，但还是看原版比较有感觉。实体书价格不菲，而且iOS7的版本也快出版了，觉得现在买一本iOS6的不太合适，所以还是在网上找了pdf，先看起来，等出了iOS7的版本后再买吧。</p>

<p><img src="http://img5.douban.com/lpic/s26815358.jpg" /></p>

<p>iOS的开发也是MVC(Model-View-Controller)的框架，目前是个流行的开发框架。在Chapter 4中，作者介绍了如何构建简单的互动（通过按钮改变文字的内容）。其中提到了<code>Outlet</code>和<code>Action</code>两个东西，<code>Outlet</code>是controller中的对象，他会映射到view中的一个真实的元素。<code>Action</code>是controller的方法，他反映了view中一个元素的动作，就是说view中的某个元素触发了一个事件（比如按钮被按了一下），会执行相应的action方法。</p>

<p>创建view中的元素很方便，在storyboard中拖出一个UI元素来，然后按住<code>control</code>键，再拖动指针，拉到<code>xxController.h</code>中的interface中，就能选择是创建一个<code>Outlet</code>还是一个<code>Action</code>. 也可以事先在<code>xxController.h</code>中创建好相应的<code>Outlet</code>对象和<code>Action</code>方法，然后按住<code>control</code>，指针拖动到这些对象和方法上时，会自动高亮这些代码，放开指针，就能创建映射。不过我还是觉得先创建UI元素，再拖动指针自动创建<code>Outlet</code>或者<code>Action</code>比较方便。</p>

<p>在<code>xxController.h</code>中进行声明之后，可以在<code>xxController.m</code>中把代码实现。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>BIDViewController.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="objectivec"><span class="line"><span class="cp">#import &lt;UIKit/UIKit.h&gt;</span>
</span><span class="line">
</span><span class="line"><span class="cp">#ifndef IBOutlet</span>
</span><span class="line"><span class="cp">#define IBOutlet</span>
</span><span class="line"><span class="cp">#endif</span>
</span><span class="line">
</span><span class="line"><span class="k">@interface</span> <span class="nc">BIDViewController</span> : <span class="nc">UIViewController</span>
</span><span class="line">
</span><span class="line"><span class="k">@property</span> <span class="p">(</span><span class="n">weak</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">UILabel</span> <span class="o">*</span><span class="n">statusLabel</span><span class="p">;</span>
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">buttonPressed:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>BIDViewController.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="objectivec"><span class="line"><span class="cp">#import &quot;BIDViewController.h&quot;</span>
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">BIDViewController</span>
</span><span class="line">
</span><span class="line"><span class="k">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">buttonPressed:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
</span><span class="line">  <span class="n">NSString</span> <span class="o">*</span><span class="n">title</span> <span class="o">=</span> <span class="p">[</span><span class="n">sender</span> <span class="nl">titleForState:</span><span class="n">UIControlStateNormal</span><span class="p">];</span>
</span><span class="line">  <span class="n">NSString</span> <span class="o">*</span><span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="s">@&quot;%@ button pressed.&quot;</span><span class="p">,</span><span class="n">title</span><span class="p">];</span>
</span><span class="line">  <span class="n">_statusLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/29/full-of-regret/">
		
			不小心又被回忆填满</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-01-29T02:00:00+08:00" pubdate data-updated="true">Jan 29<span>th</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/sui-xin-suo-xiang/'>隨心所想</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/01/29/full-of-regret/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>电脑屏幕上不时跳出磁盘已满的消息，弹出来多了，就决定清理一下硬盘，看看哪些东西可以永久丢掉的。</p>

<p>打开了以前手机拍的视频的文件夹，那都是2，3年前的事了。真的不该手贱打开来的，看了之后心里又起了一点点震动。</p>

<p>到底是什么原因，可以让原本都下决心忘记的事情又重新出现在了眼前。尝试着忘掉这些事情，但是却因为一些几分钟甚至几秒钟的视频，让自己又开始动摇。</p>

<p>故事什么时候才能有结尾。</p>

<p><img src="http://farm4.staticflickr.com/3781/10802229284_e2fc908fdb_o.jpg" /></p>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/22/ui-redesign/">
		
			UI大改</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-01-22T23:01:00+08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/design/'>Design</a>, <a class='category' href='/blog/categories/ui/'>UI</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/01/22/ui-redesign/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>最近对UI设计突然起了兴趣。在很久很久以前，还在读初中的时候就开始搞网页设计和Photoshop，不过我最终还是没能走上平面设计，或者UED的道路。这几天对bootstrap研究了一下，正好趁热打铁，顺便丰富一下自己的UI设计理念。</p>

<p>向公司的MM询问到了UI相关的网站，其中最喜欢的是<a href="http://dribbble.com/">http://dribbble.com/</a>.虽然自己的设计能力有限，但是模仿能力我觉得还是挺不错的。于是我结合了dribble中那些作品的配色，和强大的bootstrap，开始了自己Blog的UI创作。这里要强调一下Responsive的概念，这真的很棒！根据当前窗口的尺寸，可以显示不同的排版。我的理解还停留在以前通过判断agent来改变CSS的阶段，现在用了这个之后感觉方便更多了。UI大改的第一步基本上完成了，包括页面的配色，大致的样式以及页面布局。接下来准备好好设计一些icon，比如<code>favicon</code>, <code>logo</code>. 当然还有<code>banner</code>.</p>

<h2 id="ps">PS</h2>
<p>最近heroku的连接速度越来越慢了，无意中发现了<a href="https://stdyun.com/">stdyun</a>, 他提供免费的octopress的托管（说白了就是帮你存储一些静态网页嘛），目前把部落格放到上面，感觉从部署到连接，都很流畅，以后更新部落格再也不用翻墙了。</p>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/01/05/hive-stream-with-python/">
		
			用python写hive的UDAF</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2014-01-05T15:33:00+08:00" pubdate data-updated="true">Jan 5<span>th</span>, 2014</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/hive/'>Hive</a>, <a class='category' href='/blog/categories/python/'>Python</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2014/01/05/hive-stream-with-python/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>之前写过一篇关于说Python无法实现hive UDAF的文章，后来经过尝试，python完全可以代替JAVA实现hive中常用的UDF,UDAF,及UDTF.</p>

<p>通过<code>transform</code>语句，可以将hive语句中<code>select</code>得到的数据通过类似hadoop中<a href="http://hadoop.apache.org/docs/stable1/streaming.html">streaming</a>的方式，传给<code>using</code>语句中的脚本作为输入。用<code>DISTRIBUTE BY</code>将mapper的输出分类给reducer. </p>

<h2 id="udaf">UDAF</h2>

<p>由于<code>SELECT</code>和<code>DISTRIBUTE BY</code>是有先后顺序，所以要先得到经过<code>DISTRIBUTE BY</code>的数据，再用<code>TRANSFORM</code>进行转化，保证相同的key落入到同一个reducer中去。reducer把处理后的结果以<code>AS</code>中的字段格式进行输出。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class=""><span class="line">FROM (
</span><span class="line">SELECT a,b,c,d
</span><span class="line">FROM db
</span><span class="line">DISTRIBUTE BY a
</span><span class="line">SORT BY a,b ) T
</span><span class="line">SELECT TRANSFORM(T.a, T.b, T.c, T.d)
</span><span class="line">USING 'python udaf.py'
</span><span class="line">AS (a,b,e)</span></code></pre></td></tr></table></div></figure></notextile></div>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="c">#! /usr/bin/env python</span>
</span><span class="line"><span class="c">#encoding=utf-8</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">sys</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">logging</span>
</span><span class="line">
</span><span class="line"><span class="n">current</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span><span class="s">&quot;e&quot;</span><span class="p">:</span><span class="bp">None</span><span class="p">}</span>
</span><span class="line"><span class="n">a</span><span class="o">=</span><span class="bp">None</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">foo</span> <span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">):</span>
</span><span class="line">    <span class="n">e</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
</span><span class="line">    <span class="c">#To-do, write something</span>
</span><span class="line">    <span class="k">return</span> <span class="n">e</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">output</span> <span class="p">():</span>
</span><span class="line">    <span class="c">#To-do, write something</span>
</span><span class="line">    <span class="k">print</span> <span class="o">...</span>
</span><span class="line">
</span><span class="line"><span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">:</span>
</span><span class="line">    <span class="k">try</span><span class="p">:</span>
</span><span class="line">        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\t</span><span class="s">&#39;</span><span class="p">)</span>
</span><span class="line">        <span class="n">e</span><span class="o">=</span><span class="n">foo</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
</span><span class="line">    <span class="k">except</span><span class="p">:</span>
</span><span class="line">        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</span><span class="line">        <span class="k">continue</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="n">current</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">a</span><span class="p">:</span>
</span><span class="line">        <span class="k">if</span> <span class="n">current</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">]:</span>
</span><span class="line">            <span class="n">output</span><span class="p">()</span>
</span><span class="line">        <span class="n">current</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">a</span>
</span><span class="line">        <span class="n">current</span><span class="p">[</span><span class="s">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">b</span>
</span><span class="line">        <span class="n">current</span><span class="p">[</span><span class="s">&quot;e&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">e</span>
</span><span class="line">    <span class="k">else</span><span class="p">:</span>
</span><span class="line">        <span class="n">current</span><span class="p">[</span><span class="s">&quot;e&quot;</span><span class="p">]</span><span class="o">+=</span><span class="n">e</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="n">current</span><span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">]:</span>
</span><span class="line">    <span class="n">output</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="section">代码的重用</h2>

<p>如果按照以上的方式，是可以实现UDAF的效果，但是代码的重用性不高。如果在java中，可以写多个不同功能的类，然后打在一个jar包中。不过在python中实现起来有点困难，比如我在另一个py脚本中定义两个函数foo,bar,在一个udaf脚本中需要先import那个py 模块，然后再用这两个函数。这样就需要在<code>add file</code>中同时添加两个py脚本，在实际使用过程中，发现添加多个py脚本后，在py代码中使用import语句，会找不到那个文件的路径。原因是在hdfs中，这些py脚本不一定会在同一个目录下。所以只能把所有需要用到的函数写在同一个py脚本中。这样一来，以后需要同种功能的函数时，需要重写这些代码。之后再看看有没有其他可行的方案。</p>

<p><a href="/blog/2013/09/25/hive-python-udf/">HIVE中使用python实现UDF</a></p>

<p><a href="/blog/2013/11/01/udf-in-python-sucks/">在hive中使用python来做UDF有点糟</a></p>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/12/26/add-latex/">
		
			在Octopress中使用LaTeX</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2013-12-26T15:07:00+08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2013</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/latex/'>LaTeX</a>, <a class='category' href='/blog/categories/octopress/'>Octopress</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2013/12/26/add-latex/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>在Octopress中显示LaTeX的方法，比想象中的要简单。只要几步，就能完成。</p>

<h2 id="headmathjax">在head中加入MathJax</h2>

<p>MathJax用来对LaTeX脚本进行渲染。</p>

<p>可以把下面的代码放到<code>source/_include/custom/head.html</code>中。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="c">&lt;!-- mathjax config similar to math.stackexchange --&gt;</span>
</span><span class="line"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/x-mathjax-config&quot;</span><span class="nt">&gt;</span>
</span><span class="line"><span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class="line">  <span class="nx">jax</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;input/TeX&quot;</span><span class="p">,</span> <span class="s2">&quot;output/HTML-CSS&quot;</span><span class="p">],</span>
</span><span class="line">  <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">]</span> <span class="p">],</span>
</span><span class="line">    <span class="nx">displayMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$$&#39;</span><span class="p">,</span> <span class="s1">&#39;$$&#39;</span><span class="p">]],</span>
</span><span class="line">    <span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class="line">    <span class="nx">skipTags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;script&#39;</span><span class="p">,</span> <span class="s1">&#39;noscript&#39;</span><span class="p">,</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">]</span>
</span><span class="line">  <span class="p">},</span>
</span><span class="line">  <span class="nx">messageStyle</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span class="line">  <span class="s2">&quot;HTML-CSS&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">preferredFont</span><span class="o">:</span> <span class="s2">&quot;TeX&quot;</span><span class="p">,</span> <span class="nx">availableFonts</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;STIX&quot;</span><span class="p">,</span><span class="s2">&quot;TeX&quot;</span><span class="p">]</span> <span class="p">}</span>
</span><span class="line"><span class="p">});</span>
</span><span class="line"><span class="nt">&lt;/script&gt;</span>
</span><span class="line"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="kramdownrdiscount">使用kramdown代替默认的rdiscount</h2>

<p>从网上的介绍来看，kramdown对于MathJax的支持要比rediscount好。</p>

<ul>
  <li>
    <p>在<code>Gemfile</code>中加入一行<code>gem 'kramdown'</code></p>
  </li>
  <li>
    <p>在<code>_config.yml</code>修改<code>markdown: kramdown</code></p>
  </li>
  <li>
    <p><code>bundle install</code></p>
  </li>
</ul>

<p>另外在使用上，kramdown的格式比rdiscount更加严谨，比如在插入code block时，必须严格的与上一行间隔一行。导致我又检查了一遍以前的文章，改了很多地方。</p>

<h2 id="sample">Sample</h2>

<script type="math/tex; mode=display">% <![CDATA[

\begin{align*}
  & \phi(x,y) = \phi \left(\sum_{i=1}^n x_ie_i, \sum_{j=1}^n y_je_j \right)
  = \sum_{i=1}^n \sum_{j=1}^n x_i y_j \phi(e_i, e_j) = \\
  & (x_1, \ldots, x_n) \left( \begin{array}{ccc}
      \phi(e_1, e_1) & \cdots & \phi(e_1, e_n) \\
      \vdots & \ddots & \vdots \\
      \phi(e_n, e_1) & \cdots & \phi(e_n, e_n)
    \end{array} \right)
  \left( \begin{array}{c}
      y_1 \\
      \vdots \\
      y_n
    \end{array} \right)
\end{align*}
 %]]></script>

<p>上面的这些就是通过下面的LaTeX代码显示的：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="latex"><span class="line"><span class="sb">$$</span><span class="nb"></span>
</span><span class="line"><span class="nv">\begin</span><span class="nb">{align</span><span class="o">*</span><span class="nb">}</span>
</span><span class="line"><span class="nb">  &amp; </span><span class="nv">\phi</span><span class="o">(</span><span class="nb">x,y</span><span class="o">)</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="nv">\phi</span><span class="nb"> </span><span class="nv">\left</span><span class="o">(</span><span class="nv">\sum</span><span class="nb">_{i</span><span class="o">=</span><span class="m">1</span><span class="nb">}^n x_ie_i, </span><span class="nv">\sum</span><span class="nb">_{j</span><span class="o">=</span><span class="m">1</span><span class="nb">}^n y_je_j </span><span class="nv">\right</span><span class="o">)</span><span class="nb"></span>
</span><span class="line"><span class="nb">  </span><span class="o">=</span><span class="nb"> </span><span class="nv">\sum</span><span class="nb">_{i</span><span class="o">=</span><span class="m">1</span><span class="nb">}^n </span><span class="nv">\sum</span><span class="nb">_{j</span><span class="o">=</span><span class="m">1</span><span class="nb">}^n x_i y_j </span><span class="nv">\phi</span><span class="o">(</span><span class="nb">e_i, e_j</span><span class="o">)</span><span class="nb"> </span><span class="o">=</span><span class="nb"> </span><span class="nv">\\</span><span class="nb"></span>
</span><span class="line"><span class="nb">  &amp; </span><span class="o">(</span><span class="nb">x_</span><span class="m">1</span><span class="nb">, </span><span class="nv">\ldots</span><span class="nb">, x_n</span><span class="o">)</span><span class="nb"> </span><span class="nv">\left</span><span class="o">(</span><span class="nb"> </span><span class="nv">\begin</span><span class="nb">{array}{ccc}</span>
</span><span class="line"><span class="nb">      </span><span class="nv">\phi</span><span class="o">(</span><span class="nb">e_</span><span class="m">1</span><span class="nb">, e_</span><span class="m">1</span><span class="o">)</span><span class="nb"> &amp; </span><span class="nv">\cdots</span><span class="nb"> &amp; </span><span class="nv">\phi</span><span class="o">(</span><span class="nb">e_</span><span class="m">1</span><span class="nb">, e_n</span><span class="o">)</span><span class="nb"> </span><span class="nv">\\</span><span class="nb"></span>
</span><span class="line"><span class="nb">      </span><span class="nv">\vdots</span><span class="nb"> &amp; </span><span class="nv">\ddots</span><span class="nb"> &amp; </span><span class="nv">\vdots</span><span class="nb"> </span><span class="nv">\\</span><span class="nb"></span>
</span><span class="line"><span class="nb">      </span><span class="nv">\phi</span><span class="o">(</span><span class="nb">e_n, e_</span><span class="m">1</span><span class="o">)</span><span class="nb"> &amp; </span><span class="nv">\cdots</span><span class="nb"> &amp; </span><span class="nv">\phi</span><span class="o">(</span><span class="nb">e_n, e_n</span><span class="o">)</span><span class="nb"></span>
</span><span class="line"><span class="nb">    </span><span class="nv">\end</span><span class="nb">{array} </span><span class="nv">\right</span><span class="o">)</span><span class="nb"></span>
</span><span class="line"><span class="nb">  </span><span class="nv">\left</span><span class="o">(</span><span class="nb"> </span><span class="nv">\begin</span><span class="nb">{array}{c}</span>
</span><span class="line"><span class="nb">      y_</span><span class="m">1</span><span class="nb"> </span><span class="nv">\\</span><span class="nb"></span>
</span><span class="line"><span class="nb">      </span><span class="nv">\vdots</span><span class="nb"> </span><span class="nv">\\</span><span class="nb"></span>
</span><span class="line"><span class="nb">      y_n</span>
</span><span class="line"><span class="nb">    </span><span class="nv">\end</span><span class="nb">{array} </span><span class="nv">\right</span><span class="o">)</span><span class="nb"></span>
</span><span class="line"><span class="nv">\end</span><span class="nb">{align</span><span class="o">*</span><span class="nb">}</span>
</span><span class="line"><span class="s">$$</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/12/23/my-first-chrome-extension/">
		
			开发Chrome插件中遇到的一些坑</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2013-12-23T00:03:00+08:00" pubdate data-updated="true">Dec 23<span>rd</span>, 2013</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/chrome/'>Chrome</a>, <a class='category' href='/blog/categories/google/'>Google</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2013/12/23/my-first-chrome-extension/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>前几天参加了一个hackthon, 在大约24小时的时间内，完成了一个chrome插件，插件扩展大众点评现有的一些功能，比如增加了街景视图，网页上的右键搜索菜单，和本地的点评商户收藏夹。具体可以自己使用看看，不过目前还没上架，可以下载源码来自己玩玩。<a href="https://github.com/j0x7c4/hackstreet">https://github.com/j0x7c4/hackstreet</a></p>

<p>以前没有太多JS的开发经验，这次开发是不断掉进坑里，然后再从坑里爬出来，直到最后有个完整版本出来。先说说chrome插件的配置文件吧，插件中有个叫<code>manifest.json</code>的文件，他管理了插件中所需的所有东西。</p>

<h2 id="hack">Hack现有网页的内容</h2>

<p>由于我们的插件需要修改大众点评网现有网页内容，比如在网页中插入我们的街景视图(我们的街景功能是用了腾讯街景的API). 这个就需要让<code>content_scripts</code>来做，他主要包括三个字段，<code>matches</code>, <code>css</code>, 和<code>js</code>. 只要把自己的JS文件名放到它的<code>js</code>字段中，一旦访问的URL符合规则，就会执行js中的脚本。例如：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="json"><span class="line"><span class="s2">&quot;content_scripts&quot;</span><span class="err">:</span> <span class="p">[</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="nt">&quot;matches&quot;</span><span class="p">:[</span><span class="s2">&quot;http://www.dianping.com/shop/*&quot;</span><span class="p">],</span>
</span><span class="line">    <span class="nt">&quot;css&quot;</span><span class="p">:[</span><span class="s2">&quot;bootstrap.css&quot;</span><span class="p">],</span>
</span><span class="line">    <span class="nt">&quot;js&quot;</span><span class="p">:[</span><span class="s2">&quot;hackit.js&quot;</span><span class="p">]</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>其中的CSS可以对自己添的内容制定样式。这个看似很简单，其实里面暗藏了一个大坑，不过也是因为自己太粗心，没有仔细看doc所导致的。由于我要在原有网页中嵌入一个街景视图，而街景视图用到了某企鹅的街景API，而那个API又必须是在线调用的。在普通的HTML中，要调用一个网上的脚本很方便，只需添加<code>&lt;script&gt;</code>标签，在<code>src</code>中指定脚本的URL。但是在chrome插件中，无法通过类似的方法，将脚本载入当前页面，并在插件的js脚本中调用。因为<code>content_scripts</code>中的脚本虽然可以访问当前页面的内容，但是无法调用当前页面中的js函数，这个在Chrome的开发文档中有提到：</p>

<blockquote>
  <p>However, content scripts have some limitations. They cannot:</p>

  <p>Use chrome.* APIs (except for parts of chrome.extension)</p>

  <p>Use variables or functions defined by their extension’s pages</p>

  <p>Use variables or functions defined by web pages or by other content scripts</p>
</blockquote>

<p><a href="http://developer.chrome.com/extensions/content_scripts.html">http://developer.chrome.com/extensions/content_scripts.html</a></p>

<p>因此只能把企鹅的js载到本地啦，然后再hack一下那个脚本，因为在本地调用需要做些修改。</p>

<h2 id="section">还有一些小东西</h2>

<p>开发chrome插件还有一些小东西可以分享一下，比如那个icon，文档中说最好是19x19的png图片，但如果真的把图片做成19x19，显示在浏览器中会比较糊（可能是因为我的retina屏幕）。其实把图片弄的大一点也是可以的，只要长宽比例是1:1就好。</p>

<p>如果在脚本中需要有一些跨域的请求，比如我将地址转化成经纬度时，是用到了google map的api, 我需要向<code>https://maps.googleapis.com/</code>发送请求，这就需要把<code>https://maps.googleapis.com/*</code>加入到<code>manifest.json</code>的<code>permissions</code>字段中。</p>

<p>还可以把一些公用的函数写在<code>background</code>的脚本中，然后通过message passing的方式去调用这些函数，不过具体效率还没测试过。在<code>background</code>中，可以直接使用<code>&lt;script&gt;</code>标签来添加在线的脚本。</p>

		
		
	</div>

</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/12/11/todays-plugin-of-sublime/">
		
			好用的sublime插件</a>
	</h2>
	<div class="eli-post-meta">
		<div class="date"><span class="glyphicon eli-meta-icon glyphicon-calendar"></span>








  


<time datetime="2013-12-11T16:35:00+08:00" pubdate data-updated="true">Dec 11<span>th</span>, 2013</time></div>
		<div class="tags"><span class="glyphicon eli-meta-icon glyphicon-tags"></span>


	<a class='category' href='/blog/categories/sublime-text/'>Sublime Text</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
		<div class="comments"><span class="glyphicon eli-meta-icon glyphicon-comment"></span><a href="/blog/2013/12/11/todays-plugin-of-sublime/#disqus_thread">Comments</a></div>
	</div>
	<div class="entry-content">
		<p>今天尝试了3个很好用的sublime插件，在这里mark一下。这些插件都能在sublime的Package Control中找到，可以在线安装。</p>

<h2 id="sublimelinter">SublimeLinter</h2>

<p>经常用sublime写python和一些shell的脚本，有些地方写错了不太容易发现。这个插件可以自动检测一些格式上的错误。</p>

<h2 id="sidebarenhancements">SideBarEnhancements</h2>

<p>增强了sublime sidebar的功能，在sidebar上点右键能看到很多新的选项，谁用谁知道。</p>

<h2 id="filediffs">FileDiffs</h2>

<p>为sublime增加了diff的功能，真的很不错。直接在sidebar可以点右键选择需要比较的文件。</p>

<h2 id="sidebargit">SideBarGit</h2>

<p>在有git的目录下，能在sublime的状态栏中显示当前git的分支，虽然这个功能很平凡，但是提醒你当前的分支是很重要的，改code不要改错分支哦~</p>

		
		
	</div>

</article>

<ul class="pager">

    
        <li class="next"><a href="/blog/page/2/" >Older &rarr; </a></li>
    
</ul>

	<footer>
		<p>
  Copyright &copy; 2014 - Eli -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
	</footer>
	</div>
	<div class="col-md-1 right-page"></div>
</div>
</div>

<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'blog-jfttt';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42052957-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>