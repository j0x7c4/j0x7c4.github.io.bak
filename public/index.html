
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>醉過方知酒濃</title>
	<meta name="author" content="Eli">

	
	<meta name="description" content="人生若只如初見
何事秋風悲畫扇 等閒變卻故人心
卻道故心人易變 兩人相見，並沒有絲毫的躲閃，言語之間還是如同往常。真的像是认识很久的老友，我了解她，她也了解我。交谈时毫不顾忌，于是，她還是那麼欢快中带点豪爽，我還是那樣幽默中带点木讷。 从热恋到分手，是否就是一个从有很多话想讲， &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="醉過方知酒濃" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/gmap.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
	<script src="/javascripts/gmap.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">醉過方知酒濃</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Home</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/research">Research</a></li>
	<li><a href="/about">About Me</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Home</a></li>
	<li><a href="/blog/archives">Archives</a></li>
	<li><a href="/research">Research</a></li>
	<li><a href="/about">About Me</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:yoursite.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:yoursite.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/24/first-love/">
		
			人生若只如初见</a>
	</h2>
	<div class="entry-content">
		<blockquote><p>人生若只如初見
何事秋風悲畫扇</p>

<p>等閒變卻故人心
卻道故心人易變</p></blockquote>

<p>兩人相見，並沒有絲毫的躲閃，言語之間還是如同往常。真的像是认识很久的老友，我了解她，她也了解我。交谈时毫不顾忌，于是，她還是那麼欢快中带点豪爽，我還是那樣幽默中带点木讷。</p>

<p>从热恋到分手，是否就是一个从有很多话想讲，到把能讲的话都讲完的一个过程？双方发现没话讲了，于是一方说分手，另一方默认。但开始恋爱的原因，不就是觉得我们有永远讲不完的话题，永远用不完的欢笑吗？为什么当恋人非得有话要讲，聊得越多就表明爱的越多吗？在交往过程中，双方都有责任和义务和对方讲话，一旦讲不出话，沉没时，就会导致冷战的开始，觉得缘分已尽了吧，或者觉得对方变心了。反而是成了朋友之后，卸下了这份责任和义务，想讲的时候就讲，不讲也不会有人责怪。没有了压力，自然聊得轻松。</p>

<p>爱情真的能转化成友情，还是旧情人相见时互相客套的热情？双方尽量表现的不在乎，好像在说，“看吧，没有你我照样过得很好”。我只是单纯的想对她好，因为以前我对其他女生好，她会生气，现在我对她好，至少还没有人会生我的气吧。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-24T22:11:00+08:00" pubdate data-updated="true">Oct 24<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/sui-xin-suo-xiang/'>隨心所想</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/24/first-love/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/18/travel-to-xiamen/">
		
			终于来到了厦门</a>
	</h2>
	<div class="entry-content">
		<p>以前一直想去厦门，可是都没有机会，没有成行。后来就去了台湾。
现在从台湾回来，没想到工作还不到一个月就有机会和同事们一起去厦门旅游。我们搭某廉价航空的飞机，旅途算是有点艰辛——除了飞机晚点一个多小时不说，整趟飞行中不能把座椅后背倒下来，结果坐的脖子都僵硬了T_T</p>

<p>好在最后还是安全降落在厦门机场，来到近期被爆数据库的某家快捷酒店。到酒店已经11点半了，稍微整理了一下出来到附近的宵夜摊，在一家卖沙茶面的店里坐下了。虽然说离开台湾还不到2个月，不过现在身处一海峡之隔的厦门，真的对台湾有了一点想念。于是点了一个在台湾常吃的蚵仔煎(ou a jian)，和没有吃过的沙茶面。结果蚵仔煎和我想的差距有点大，看来隔了一条海峡，蚵仔煎出现了变种。可怕的是，价格竟然还要高于台湾的。。。</p>

<h2>Tips</h2>

<p>除了物价过高之外，小贩的人品也很低。特别是买水果，基本上所有的小贩秤都偏重，大家在买水果之前，先要把手机放在秤上看看秤的准度。太离谱的就马上走人。如果在晚上，要当心小贩给你偷梁换柱。我们一行人在鹭江道的<b>台湾小吃街</b>门口买了水果，没想到小贩给我们秤完重量后，偷偷的换了另外一袋给我们，幸好我们人多，立刻把她识破了。然后她从一开始的客气的给我们试吃水果，立刻变的很凶的大声叫嚷。</p>


		
		<a href="/blog/2013/10/18/travel-to-xiamen/" class="more-link">More</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-18T01:32:00+08:00" pubdate data-updated="true">Oct 18<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/travel/'>Travel</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/18/travel-to-xiamen/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/16/try-networkx/">
		
			试用networkx</a>
	</h2>
	<div class="entry-content">
		<p>最近想用pagerank的方法来分析微博好友之间的权威关系，于是试着用crawler去抓微博上好友的信息，然后建立关系网络。在网上看到用networkx可以比较方便的建立关系网络，并且可以比较方便的用pagerank计算每个好友的重要性。</p>

<p>使用networks加入node和edge都很方便，并且networkx宣称他的node可以支持任何python的hashable的类型，于是我一开始使用custom的node.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">user</span><span class="p">:</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">args</span><span class="p">):</span>
</span><span class='line'>      <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;^[\d]+$&#39;</span><span class="p">,</span><span class="n">args</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">])</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">]</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="n">args</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>可是这样写并不正确，他好像对自定义的类支持不太好（或许是不支持自定义类）。于是在网上查了好久，才看到要实现给一个node添加附加信息的方法。</p>

<p><a href="http://stackoverflow.com/questions/8490794/how-do-i-make-a-cutomised-object-as-a-node-for-networkx-and-how-do-i-look-it-up">http://stackoverflow.com/questions/8490794/how-do-i-make-a-cutomised-object-as-a-node-for-networkx-and-how-do-i-look-it-up</a></p>

<p>于是在加入node的时候，应该用</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s">&quot;label&quot;</span><span class="p">,</span><span class="n">foo</span><span class="o">=</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="n">bar</span><span class="o">=</span><span class="s">&quot;bar&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>于是把添加node改写成</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">G</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">uid</span><span class="p">,</span><span class="n">user</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>添加node和edge是没问题了，结果在保存<code>gml</code>文件时又出问题了，里面的字符串竟然不支持utf-8… 官方是这么解释的：</p>

<blockquote><p>Notes</p>

<p>GML specifications indicate that the file should only use 7bit ASCII text encoding.iso8859-1 (latin-1).</p>

<p>This implementation does not support all Python data types as GML data. Nodes, node attributes, edge attributes, and graph attributes must be either dictionaries or single stings or numbers. If they are not an attempt is made to represent them as strings. For example, a list as edge data G[1][2][‘somedata’]=[1,2,3], will be
represented in the GML file as:</p>

<p><a href="http://networkx.lanl.gov/reference/generated/networkx.readwrite.gml.write_gml.html">http://networkx.lanl.gov/reference/generated/networkx.readwrite.gml.write_gml.html</a></p></blockquote>

<p>于是我只好抽取是ascii的编码的用户信息。然后把类的定义改写成：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">user</span><span class="p">:</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">args</span><span class="p">):</span>
</span><span class='line'>      
</span><span class='line'>      <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&#39;^[\d]+$&#39;</span><span class="p">,</span><span class="n">args</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">uid</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">]</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;uid&#39;</span><span class="p">:</span><span class="n">args</span><span class="p">[</span><span class="s">&#39;uid&#39;</span><span class="p">],</span>\
</span><span class='line'>                   <span class="s">&#39;n_follows&#39;</span><span class="p">:</span><span class="n">args</span><span class="p">[</span><span class="s">&#39;n_follows&#39;</span><span class="p">],</span>\
</span><span class='line'>                   <span class="s">&#39;n_fans&#39;</span><span class="p">:</span><span class="n">args</span><span class="p">[</span><span class="s">&#39;n_fans&#39;</span><span class="p">],</span>\
</span><span class='line'>                   <span class="s">&#39;n_weibos&#39;</span><span class="p">:</span><span class="n">args</span><span class="p">[</span><span class="s">&#39;n_weibos&#39;</span><span class="p">]}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uid</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样终于正常创建网络，读写gml文件了。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-16T01:44:00+08:00" pubdate data-updated="true">Oct 16<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/tech/'>Tech</a>, <a class='category' href='/blog/categories/coding/'>coding</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/16/try-networkx/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/10/new-fselector-r/">
		
			Feature Selection in R Is EASY!</a>
	</h2>
	<div class="entry-content">
		<p>最早认识R语言是看到一本书叫做<i>&ldquo;Machine Learning for Hackers&rdquo;</i>, 听说R在machine learning的研究方面很有用处，就是一个专门为Machine Learning而生的语言，不过一直没用仔细研究过。在网上寻找Feature Selection方面的工具时，看到有人推荐R的package <a href=http://cran.r-project.org/web/packages/FSelector/FSelector.pdf>FSelector</a> . 于是就载下来尝试一下，结果发现真的很方便。</p>

<h4>R可以方便的使用现成的benchmark（比如<code>iris</code>），只要一句话就可以轻松导入数据！</h4>

<p>下面是一个简单的例子使用FSelector, 采用cvs来寻找feature的子集。其中第一个参数Species~表示数据集iris中的类别(label).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>library<span class="p">(</span>FSelector<span class="p">)</span>
</span><span class='line'>data<span class="p">(</span>iris<span class="p">)</span>
</span><span class='line'>subset <span class="o">&lt;-</span> cfs<span class="p">(</span>Species<span class="o">~</span>.<span class="p">,</span> iris<span class="p">)</span>
</span><span class='line'>f <span class="o">&lt;-</span> as.simple.formula<span class="p">(</span>subset<span class="p">,</span> <span class="s">&quot;Species&quot;</span><span class="p">)</span>
</span><span class='line'>print<span class="p">(</span>f<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>下面这个例子比较高阶，可以自己指定评价feature子集的好坏。采用best first search的策略来寻找子集。其中evaluator训练了rpart model，通过计算error rate来评价feature的好坏。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='r'><span class='line'>library<span class="p">(</span>FSelector<span class="p">)</span>
</span><span class='line'>library<span class="p">(</span>rpart<span class="p">)</span>
</span><span class='line'>data<span class="p">(</span>iris<span class="p">)</span>
</span><span class='line'>evaluator <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>subset<span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">#k-fold cross validation</span>
</span><span class='line'>  k <span class="o">&lt;-</span> <span class="m">5</span>
</span><span class='line'>  splits <span class="o">&lt;-</span> runif<span class="p">(</span>nrow<span class="p">(</span>iris<span class="p">))</span>
</span><span class='line'>  results <span class="o">=</span> sapply<span class="p">(</span><span class="m">1</span><span class="o">:</span>k<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>i<span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    test.idx <span class="o">&lt;-</span> <span class="p">(</span>splits <span class="o">&gt;=</span> <span class="p">(</span>i <span class="o">-</span> <span class="m">1</span><span class="p">)</span> <span class="o">/</span> k<span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span>splits <span class="o">&lt;</span> i <span class="o">/</span> k<span class="p">)</span>
</span><span class='line'>    train.idx <span class="o">&lt;-</span> <span class="o">!</span>test.idx
</span><span class='line'>    test <span class="o">&lt;-</span> iris<span class="p">[</span>test.idx<span class="p">,</span> <span class="p">,</span> drop<span class="o">=</span><span class="kc">FALSE</span><span class="p">]</span>
</span><span class='line'>    train <span class="o">&lt;-</span> iris<span class="p">[</span>train.idx<span class="p">,</span> <span class="p">,</span> drop<span class="o">=</span><span class="kc">FALSE</span><span class="p">]</span>
</span><span class='line'>    tree <span class="o">&lt;-</span> rpart<span class="p">(</span>as.simple.formula<span class="p">(</span>subset<span class="p">,</span> <span class="s">&quot;Species&quot;</span><span class="p">),</span> train<span class="p">)</span>
</span><span class='line'>    error.rate <span class="o">=</span> sum<span class="p">(</span>test<span class="o">$</span>Species <span class="o">!=</span> predict<span class="p">(</span>tree<span class="p">,</span> test<span class="p">,</span> type<span class="o">=</span><span class="s">&quot;c&quot;</span><span class="p">))</span> <span class="o">/</span> nrow<span class="p">(</span>test<span class="p">)</span>
</span><span class='line'>    <span class="kr">return</span><span class="p">(</span><span class="m">1</span> <span class="o">-</span> error.rate<span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'>  <span class="c1">#print(subset)</span>
</span><span class='line'>  <span class="c1">#print(mean(results))</span>
</span><span class='line'>  <span class="kr">return</span><span class="p">(</span>mean<span class="p">(</span>results<span class="p">))</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>subset <span class="o">&lt;-</span> best.first.search<span class="p">(</span>names<span class="p">(</span>iris<span class="p">)[</span><span class="m">-5</span><span class="p">],</span> evaluator<span class="p">)</span>
</span><span class='line'>f <span class="o">&lt;-</span> as.simple.formula<span class="p">(</span>subset<span class="p">,</span> <span class="s">&quot;Species&quot;</span><span class="p">)</span>
</span><span class='line'>print<span class="p">(</span>f<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>iris</h3>

<p>This famous (Fisher&rsquo;s or Anderson&rsquo;s) iris data set gives the measurements in centimeters of the variables sepal length and width and petal length and width, respectively, for 50 flowers from each of 3 species of iris. The species are Iris setosa, versicolor, and virginica.</p>

<h3>cfs</h3>

<p>The algorithm finds attribute subset using correlation and entropy measures for continous and discrete data.</p>

<h2>Hints</h2>

<ul>
<li>虽然原生的R语言的IDE也不错用，但是发现一个更加强大的IDE，RStudio, 真是可以媲美matlab的IDE了。</li>
<li>R语言也可以在命令行中用batch的方式来运行，具体指令是<code>R CMD BATCH [options] infile [outfile]</code>, infile就是R的脚本文件，R的输出一般无法显示到STDOUT中，是以文件的形式存起来。如果没有指定outfile，就会以原文件名的方式来命名。在脚本执行的时候，很多无关紧要的内容也会被输出，可以使用options命令的<code>--slave</code>. 在最后的输出中，他也会很好心的帮你计算运行时间，如果不需要，也可以加<code>--no-timing</code>. 详见<a href="http://stat.ethz.ch/R-manual/R-devel/library/utils/html/BATCH.html">http://stat.ethz.ch/R-manual/R-devel/library/utils/html/BATCH.html</a></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-10T23:43:00+08:00" pubdate data-updated="true">Oct 10<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/coding/'>Coding</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/10/new-fselector-r/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/07/google-map/">
		
			在octopress中加入Google Map</a>
	</h2>
	<div class="entry-content">
		<h3>需要科学上网才能正常显示Google Map(API被墙了T_T)</h3>

<p>想在octopress中插入地图信息，考虑到之后可能会在博客中加入关于游记的文章，如果文章能有形象的地图信息会有很好的效果。于是在网上搜寻octopress的地图插件，发现一个叫做<a herf="http://mguentner.github.io/octolayer/">Octolayer</a>的插件，想载下来试试，不过github刚好出问题，我无法获取代码，再加上他不是用google map. 作为一个google的忠实脑残粉，我就决定自己写一个。</p>

<p>研究了一下<a href="https://developers.google.com/maps/documentation/javascript/">google map API</a>，发现难度并不大。就是在我的文章内容中加入一个div，然后用js去render. 照着sample code改了一下代码，主要是为了从div的属性中读取经纬度坐标。（需要jQuery）</p>

<figure class='code'><figcaption><span>gmap.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">initialize</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">lat</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#map-canvas&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;lat&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">lng</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#map-canvas&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;lng&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">lat</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">lng</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">LatLng</span><span class="p">(</span><span class="nx">lat</span><span class="p">,</span><span class="nx">lng</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">mapOptions</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">zoom</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">center</span><span class="o">:</span> <span class="nx">loc</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">mapTypeId</span><span class="o">:</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">MapTypeId</span><span class="p">.</span><span class="nx">ROADMAP</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Map</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;map-canvas&#39;</span><span class="p">),</span>
</span><span class='line'>      <span class="nx">mapOptions</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">Marker</span><span class="p">({</span>
</span><span class='line'>      <span class="nx">position</span><span class="o">:</span> <span class="nx">loc</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">map</span><span class="o">:</span> <span class="nx">map</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Hello World!&#39;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nx">google</span><span class="p">.</span><span class="nx">maps</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">addDomListener</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">&#39;load&#39;</span><span class="p">,</span> <span class="nx">initialize</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>



		
		<a href="/blog/2013/10/07/google-map/" class="more-link">More</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-07T02:21:00+08:00" pubdate data-updated="true">Oct 7<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/coding/'>Coding</a>, <a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/07/google-map/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/04/go-to-tibet/">
		
			进藏前传</a>
	</h2>
	<div class="entry-content">
		<p>最近看了一些书，都是和西藏旅行相关的，身边也有认识的人去西藏旅行。文青们都认为去西藏可以净化自己的心灵，近距离接近天堂。作为一个伪文青的我，自然也要跟随着众多文青的后尘。去西藏的愿望也在心底埋下了一颗种子。</p>

<p>但是毕竟西藏不是一般的地方，除了高原反应和大太阳之外，路途遥远，沿路也不免遇到土匪野兽之类的东西，所以计划必须周全，于是我从现在开始收集进藏的必备知识，待这些知识成熟之后，再亲自赴藏，到时候也许会和小伙伴一起，也许会和妹子同行，也许就我一个人。此文会不断补充，希望广大网友们多多给些意见。</p>


		
		<a href="/blog/2013/10/04/go-to-tibet/" class="more-link">More</a>
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-04T16:31:00+08:00" pubdate data-updated="true">Oct 4<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/tibet/'>Tibet</a>, <a class='category' href='/blog/categories/travel/'>Travel</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/04/go-to-tibet/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/03/fu-za-de-gan-qing/">
		
			复杂的感情</a>
	</h2>
	<div class="entry-content">
		<p>前幾天被女神拒絕后，心情一直很糟，特別的失落。一直很想用一些文字來發洩一下心中的雜亂，可是卻找不到任何有力的文字。混亂的思想無法用自己幼稚的文字表達出來。不過漸漸的，我似乎明白了一些什麼道理，理解了她的想法。</p>

<p>像我這種一廂情願的人肯定有很多，自己喜歡的人，卻不一定喜歡自己。自己拿對方當做愛人，對方卻把自己當做普通朋友。自己追求很久的人，她也許也在追求其他的人。對方並沒有把你當做戀人，而只是普通朋友，所以和對方說話一定要很小心，一旦尺度過大，就會導致尷尬。經歷過多次后，自己心裡大概也有數，對方可能對自己沒感覺，但自己也不敢捅破那層窗戶紙，因為害怕被拒絕。寧可過著這樣小心翼翼的生活，將對方假想成自己的戀人，也不願意將話挑明，導致大家不歡而散。然而感情是複雜的，我還無法用某種邏輯思維去控制它，因此談話的內容難免有時會觸碰到對方的底線。終於在我出口問她之前，她主動捅破了窗戶紙。心中長久以來的擔憂卻已成真。</p>

<p>說到底，就是沒有互相吸引。我們這種不到30歲的年輕人，對於近期成家或許並沒有太大的執念，所以并不期望湊合著過，還是對一場轟轟烈烈的愛情充滿了期待。在尋找到生命中真正的伴侶之前，總是寧願不停的尋找，也不肯停下來看看自己的周圍。有些人會用很多標準去評判自己的追求者，一旦有某個條件沒有符合，就立即拉黑，如果條件符合就欣然接受；有些人卻比較感性，只要感覺對了就好，感覺不對對方再努力也是白搭。同樣兩個只憑感覺的人湊在一起，往往就無法在一起，因為兩者都對對方有感覺的概率，要遠遠小於兩者都滿足對方要求的概率。因為感情是個複雜的東西，也許感覺就在一瞬間不見了，也許感覺在一瞬間就產生了；而外在的條件是不容易變化的。也許同樣星座的人會有同樣的喜好，也許兩個人星座相同，都同樣相信感覺而不是理性的條件。這也許是相同星座比較難在一起的原因了。</p>

<p>我們在deadline來臨之前都是期望生活是豐富的，只有在deadline迫在眉睫的時候，才會用理性高效的方法去應對deadline. 有些人會選擇替代方案去解決這個問題；有些人卻喜歡寧缺毋濫。我不排斥前者，但我更加尊重後者，雖然他們浪費了追求者的一片用心，但卻保持了感情的純潔。也許我還太幼稚，對於感情的問題太理想化。但是一個沒有完全吸引自己的人，你是無法付出所有去愛這個人的。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-03T23:00:00+08:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/sui-xin-suo-xiang/'>隨心所想</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/03/fu-za-de-gan-qing/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/02/add-404-page/">
		
			添加404页面</a>
	</h2>
	<div class="entry-content">
		<p>今天给博客加了404页面，看起来感觉更加完整了一点。
加404页面的方法很简单，只要在<code>source</code>目录下面创建<code>404.html</code>文件，当发生404错误时，octopress就会自动跳转到<code>404.html</code>这个页面。
具体内容如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>---
</span><span class='line'>layout: page
</span><span class='line'>title: Sorry，404错误！你要访问的网页不存在!
</span><span class='line'>footer: false
</span><span class='line'>---</span></code></pre></td></tr></table></div></figure>


<p>其中的<code>title</code>可以改成任何自己想要的内容。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-02T23:48:00+08:00" pubdate data-updated="true">Oct 2<span>nd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/02/add-404-page/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/01/cong-wordpressdao-octopressqian-yi-cheng-gong/">
		
			从wordpress到octopress迁移成功</a>
	</h2>
	<div class="entry-content">
		<p>忙活了一晚上，终于把原来wordpress的数据导入到了octopress中，心情不好的时候做些geek的事情转移一下注意力也不错，现在有点小开心。</p>

<p>我是参照下面这个链接介绍的方法，把原来wordpress的数据导出成xml文件，然后再用jekyll-import来转的。不过貌似转完之后还需要自己手动修改一些地方，比如代码高亮部分。幸好我之前的内容也不多，就小改了一下。
<a href=http://jekyllrb.com/docs/migrations/><a href="http://jekyllrb.com/docs/migrations/">http://jekyllrb.com/docs/migrations/</a></a></p>

<p>不过目前还有个问题，从wordpress转过来的文章，在超链接上还是有点问题，如果标题中有中文，转完后的文件名是unicode编码，之后会找不到超链接。于是我手动把那些文件名改成了英文，幸好文章不多，大概改了半小时改完了。</p>

<p>接下来要了解markdown语法啦，用这个写博客真的很酷！</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-01T23:49:00+08:00" pubdate data-updated="true">Oct 1<span>st</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/01/cong-wordpressdao-octopressqian-yi-cheng-gong/#disqus_thread">Comments</a></div>
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/10/01/change-to-octopress/">
		
			改版octopress 之 安装</a>
	</h2>
	<div class="entry-content">
		<p>心血来潮想把博客从wordpress改成octopress, 毕竟在heroku上想用wordpress上传照片不太方便，而且比起静态网页来，速度慢很多。</p>

<p>但是我之前没有碰过ruby，一步一步按照网上的guide慢慢来。</p>

<p>首先从git上抓来octopress</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone git@github.com:imathis/octopress.git</span></code></pre></td></tr></table></div></figure>


<p>然后进入octopress目录下，build源代码</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd octopress
</span><span class='line'>bundle install
</span><span class='line'>rake install</span></code></pre></td></tr></table></div></figure>


<p>以上几步都没有问题，然后执行</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake preview</span></code></pre></td></tr></table></div></figure>


<p>然后问题就来了，出现了错误</p>

<p>Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
rake aborted!
undefined method `spawn&#8217; for Process:Module</p>

<p>因为octopress需要ruby 1.9.3，而我原本mac上的ruby是1.8.3. 所以要把ruby更新到1.9.3才能用</p>

<p>网上看了一遍后，用RVM可以很好的管理ruby的版本，可以方便的在多个ruby版本中进行切换，还能很方便的安装新版的ruby.</p>

<p>我安装stable版本的rvm</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -L https://get.rvm.io | bash -s stable</span></code></pre></td></tr></table></div></figure>


<p>然后将rvm写到用户环境中。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>echo "source $HOME/.rvm/scripts/rvm" &gt;&gt; ~/.bash_profile</span></code></pre></td></tr></table></div></figure>


<p>具体详见 <a href="https://rvm.io/rvm/install"><a href="https://rvm.io/rvm/install">https://rvm.io/rvm/install</a></a></p>

<p>然后使用rvm来安装1.9.3版本的ruby.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm install ruby-1.9.3-p448</span></code></pre></td></tr></table></div></figure>


<p>不过在这之前，要先确定安装了xcode的command line tools.</p>

<p>可能因为国内网络的原因，这个安装过程相当的漫长，我觉得应该先去吃个午饭比较好。。。</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-01T00:00:00+08:00" pubdate data-updated="true">Oct 1<span>st</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/tech/'>Tech</a>


</div>
	
	<div class="comments"><a href="/blog/2013/10/01/change-to-octopress/#disqus_thread">Comments</a></div>
	
</div>
</article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner"><p>
  Copyright &copy; 2013 - Eli -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p></footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'blog-jfttt';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//go.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-42052957-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>